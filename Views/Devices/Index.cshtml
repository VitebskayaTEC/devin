@{
    ViewBag.Title = "DEVIN | Устройства";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section menu {
    <li>
        <form method="get" action="./">
            <input name="search" id="search" placeholder="Поиск" value="@Request.QueryString.Get("search")" />
        </form>
    </li>
}

@section styles {
    <link rel="stylesheet" href="/devin/content/lib/jquery-ui.min.css" />
    <link rel="stylesheet" href="/devin/content/lib/select2.min.css" />
    <link rel="stylesheet" href="/devin/content/css/device.css" />
}

@section scripts {
    <script src="/devin/content/lib/jquery-1.12.4.min.js"></script>
    <script src="/devin/content/lib/jquery-ui.min.js"></script>
    <script src="/devin/content/lib/select2.min.js"></script>
    <script src="/devin/content/js/core.js"></script>
    <script src="/devin/content/js/device.js?v=2"></script>
    <script>
        var sortKey = '@Request.QueryString.Get("key")',
            sortDesc = '@Request.QueryString.Get("desc")',
            sortText = '@Request.QueryString.Get("search")';

        $('.view')
            .on('mousedown', '.unit:not(#solo) .caption th,.unit:not(#solo) .caption td:not(:first-child)', function () { toggle(this) })
            .on('mousedown', '.items tbody td:not(:first-child), .title', function () { cartOpen(this); })
            .on('mousedown', '.main th', function () { sort(this) })
            .on('mousedown', '.items th', function () { _sort(this) })
        $('#cart')
            .on('submit', 'form', function () { event.preventDefault() })
    </script>
}

@section html {

    <div id='selected' class='panel'>
        <div>Выбрано элементов: <b></b></div>
        <div><div id='move_select'><select id='moveKey'></select></div><a onclick='moveSelectedDevices()'>Переместить</a></div>
        <div><a onclick='removeAllSelection()'>Сбросить выбор</a></div>
    </div>

    <div id="excl" class='panel'>
        <form method="POST" enctype="multipart/form-data" action="/devin/asp/device_1c_compare.asp?typeof=0">
            <select onchange="parentNode.action='/devin/asp/device_1c_compare.asp?typeof='+this.value;" name='typeof'>
                <option value='0'>Компьютеры</option>
                <option value='1'>Принтеры</option>
                <option value='2'>Мониторы</option>
                <option value='3'>Модемы</option>
                <option value='4'>Сканеры</option>
                <option value='5'>ИБП</option>
                <option value='6'>Другое</option>
            </select>
            <input type='file' name="FILE1" />
            <input type='submit' value="Загрузить" />
        </form>
    </div>

    <ul class="context-menu" id="main">
        <li onclick="cartCreate()">Создать карточку устройства</li>
        <li onclick="groupCreate()">Создать группу</li>
        <li class="passive"><hr /></li>
        <li onclick="history()">История всех событий DEVIN</li>
        <li class="passive"><hr /></li>
        <li onclick="location='/devin/analyze/'">Анализ расхода картриджей</li>
        <li class="passive"><hr /></li>
        <li onclick="document.location = '/devin/devices/table';">Табличный просмотр Devin</li>
        <li onclick="document.location = '/devin/devices/table1C';">Просмотр данных 1С</li>
        <li onclick="document.location = '/devin/devices/compare1C';">Сверка с 1С</li>
    </ul>

    <ul class="context-menu" id="computer">
        <li onclick="computerOpen()">Открыть карточку</li>
        <li onclick="computerAida()">Отчет из AIDA</li>
        <li onclick="groupBeforeMove()">Переместить</li>
        <li onclick="computerDelete()">Удалить</li>
    </ul>

    <ul class="context-menu" id="group">
        <li onclick="groupEdit()">Переименовать
        <li onclick="groupBeforeMove()">Переместить</li>
        <li onclick="groupCreateInner()">Создать вложенную группу</li>
        <li onclick="groupErase()">Очистить</li>
        <li onclick="groupDelete()">Удалить</li>
    </ul>

    <ul class="context-menu" id="modal">
        <li></li>
        <li>Ок</li>
        <li onclick="$(this).parent().fadeOut(100)">Отмена</li>
    </ul>
}

@Html.Action("list")
